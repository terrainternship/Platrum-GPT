
# Как добавить транзакции в Platrum


СОДЕРЖАНИЕ
- Добавление транзакций по одной
- Импорт транзакций из файла
--- Подготовка файла
--- Если в файле нужно указать заявку финплана, за которой закрепить расход
--- Процесс импорта
- По API

## Добавление транзакций по одной
Работа с транзакциями в Platrum ведется на трех соответствующих вкладках: Доходы, Расходы, Перемещения. На каждой из них можно добавить новую транзакцию по синей кнопке с плюсом "Добавить". Появится окно добавления транзакции.
При создании транзакции всех типов нужно указать следующие параметры:
- Касса - обязательное поле, к выбранной кассе будет отнесена созданная транзакция. В случае с перемещением указывается из какой кассы в какую будет перемещена транзакция.
- Тип - обязательное поле, тип транзакции, к которому будет привязана транзакция. Типы выбираются из списка в настройках
- Сумма - сумма транзакции
- Описание - дополнительный комментарий с описанием транзакции
Дата создания транзакции проставляется автоматически (та дата, когда вы создаете транзакцию). При добавлении вы можете указать свою дату отчета. Это будет полезно в случае, если вы хотите засчитать транзакцию за другой период, а не тогда когда вносится транзакция. Например, клиент заплатил вам по счету за январь в феврале. Деньги вы получили в новом месяце, но зачесть их правильнее в январе.
Для транзакций доходов дополнительно есть возможность засчитать сумму частями в разные даты. Например, вы получили большую сумму, но услугу оказывать будете в течение нескольких месяцев. Эта настройка поможет вам распределить выручку на несколько месяцев вперед. Для этого при создании транзакции установите флаг "Распределить доход" и выберите, как именно вы хотите ее учесть:
- Равномерно на несколько месяцев, первая сумма будет начислена со следующего месяца
- Часть суммы - сразу в определенную дату, остаток на несколько месяцев вперед
- Вручную - тут вы можете указать самостоятельно, в какие даты какие суммы нужно начислить.
https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/73003735451/original/PG65685oosmIfNDjTXhB3p17TgahesVvKA.png?1646158103
Чтобы в P&L и других отчетах просматривать данные за те даты, которые вы выбирали, выберите в поле "Дата транзакции" нужное представление:
- По дате транзакции - по дате ее создания
- По дате отчета - при построении учета дата транзакции будет по той дате, которую вы выбрали в этом поле
- По дате начисления - выручка будет отображаться в тех периодах, которые выбраны для начисления.
Обратите внимание:
Если дата начисления не указывается, в представлении отчета по дате начисления транзакция учитываться не будет.
https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/73003735452/original/oBB6OgghZc2pzU2izL7itT49tqvCeXB6ZQ.png?1646158103

## Импорт транзакций из файла
Вы можете загрузить в проект сразу список транзакций вместо создания каждой транзакции вручную.
Загрузить можно транзакции всех трех типов (доходы, расходы, перемещение).
Подробно об импорте также доступна видео-инструкция
https://www.youtube.com/embed/8ZmhZnO9kk0?list=PLW1EmxdCk9RIUg3SQaAP5yJYnShvKFb6Q

### Подготовка файла
Загрузка происходит из CSV файла (любая электронная таблица легко сохранятся в данном формате).
Для импорта вам нужно подготовить файл следующего формата:
| Касса | Сумма | Автор | Тип | Дата создания | Дата отчета | Описание |
| ИП Иванов | 10000 | Евгений Ленский | Поступление от оплаты счета | 07.02.2020 | 03.06.2019 | "ООО ""Ромашка"" - Оплата по Агентскому договору № 1" |
| Основная | 999.59 |  | Поступление от оплаты счета |  | 03.06.2019 | "ООО ""Ромашка"" - Оплата по Счету №21" |
| Основная | 1500 |  | Поступление от оплаты счета |  |  |  |
- В колонке Касса нужно указать название кассы в том виде, как вы его задали в проекте. Касса обязательна
- В сумме десятые доли отделяются точкой. Сумма обязательна
- Автор так же указывается в соответствии с именем в проекте. Его можно не указывать, тогда автором транзакции будет сотрудник, выполнивший импорт
- Тип транзакции указывается в точном соответствии с названием в проекте. Тип транзакции обязателен.
- Типы транзакции в расходах могут иметь вложенную структуру, тогда в файле она отображается через знак >. Например: «Операционные расходы > Аренда офиса». Знак > отделяется пробелами.
- Дата создания может быть указана при необходимости. По умолчанию это будет дата проведения импорта. Формат строго дд.мм.ггг.
- Дата отчета может быть указана при необходимости. По умолчанию это будет дата проведения импорта. Формат строго дд.мм.ггг. Дата отчета нужна, чтобы отразить эту транзакцию в отчете за корректную дату
- Описание может содержать текст с комментарием к транзакции
После того, как таблица готова, сохраняйте ее в CSV формате (разделитель: запятая). Например, в google sheets это делается так: переходим в меню Файл -> Скачать -> CSV файл.
В результате вы получите такой файл:
Пример импорта доходов (https://s3.amazonaws.com/helpscout.net/docs/assets/5e70a9832c7d3a7e9ae9498a/attachments/5e74f9132c7d3a7e9ae9862a/%D0%9F%D1%80%D0%B8%D0%BC%D0%B5%D1%80-%D1%82%D1%80%D0%B0%D0%BD%D0%B7%D0%B0%D0%BA%D1%86%D0%B8%D0%B8%CC%86-%D0%B4%D0%BE%D1%85%D0%BE%D0%B4%D0%B0.csv)

### Если в файле нужно указать заявку финплана, за которой закрепить расход
Если помимо финансов вы используете инструмент Финплан, то большинство транзакций расхода должно быть закреплено за соответствующей заявкой.
Чтобы не приходилось вручную искать заявки и менять у них статус, нужно добавить в таблице две дополнительные колонки:
- Заявка - id заявки (ее номер)
- Пометить заявку оплаченной- оплачивать полностью или нет (принимает значения 0 или 1).
То есть строка в таблице, где у транзакции указана заявка, которую нужно перевести в оплаченные, будет выглядеть так:
https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/73003735450/original/ZrRd1VlhF_TTGXa41IU7Toof479aoGd9CQ.png?1646158102
Если вы хотите закрепить расход за заявкой, но не переводить ее в оплаченные, то в колонке
Пометить заявку оплаченной
нужно указать 0.

### Процесс импорта
Импорт происходит на отдельной странице. Доходы, расходы, перемещения импортируются раздельно. На каждой их страниц (доходы, расходы, перемещения) есть иконка для перехода к импорту (она доступна тем, кто может создавать транзакции)
https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/73003735449/original/SD2B50HrSehPIbsSyW83lIl82XKPI3g0lw.png?1646158102
На странице импорта вы можете скачать пример и загрузить свой файл. После загрузки файла начнется процесс импорта. Если в файле будут ошибки, то импорт не произойдет, а вы получите подробный вывод ошибок, который подскажет, что нужно поправить
https://s3.amazonaws.com/cdn.freshdesk.com/data/helpdesk/attachments/production/73003735453/original/b8peVBCVpBVsT5uhPeJWLm6_JERN1HERjA.png?1646158104
После исправления ошибок в файле можно повторить попытку импорта заново. После успешного импорта вы увидите кол-во созданных транзакций.

## По API
Помимо описанных способов вы также можете автоматизировать процесс добавления транзакций в платформу посредством API. Необходимые для этого методы описаны в документации -
http://api.docs.platrum.ru/modules/fintransaction/ (http://api.docs.platrum.ru/modules/fintransaction/)
 (http://api.docs.platrum.ru/modules/fintransaction/)
 (http://api.docs.platrum.ru/modules/fintransaction/%22)
Если вы не нашли в описании каких-либо методов, которые нужны вам для работы, можно посмотреть их формат в консоли браузера. Напишите нам об этом, мы учтем это при доработке документации.
